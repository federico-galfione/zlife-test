(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Ubiq:function(e,t,n){"use strict";n.r(t),n.d(t,"CalendarioModule",(function(){return ae}));var o=n("Valr"),a=n("sPEm"),c=n("w1ql"),i=n("6onV"),r=n("ey9i"),s=n("PCNd"),l=n("DUip"),d=n("atHm"),g=n("wd/R"),f=n("t9fZ"),u=n("VnD/"),b=Object(i.n)("[Calendario Page] Set initial dates",Object(r.A)()),v=Object(i.n)("[Calendario Page] Load events",Object(r.A)()),p=Object(i.n)("[Calendario Page] Success load events",Object(r.A)()),h=Object(i.n)("[Calendario Page] Failure load events",Object(r.A)()),O=Object(i.n)("[Calendario Page] Set selected event",Object(r.A)()),m=Object(i.n)("[Calendario Page] Reset page status",Object(r.A)()),P=function(e){return e.calendario},C=Object(i.q)(P,(function(e){return e.calendarioPage.events})),j=(Object(i.q)(P,(function(e){return e.calendarioPage.startDate})),Object(i.q)(P,(function(e){return e.calendarioPage.endDate})),Object(i.q)(P,(function(e){return e.calendarioPage.isLoading}))),M=Object(i.q)(P,(function(e){return e.calendarioPage.selectedEvent})),y=n("TYT/"),z=n("vqQA"),w=n("t4Ze"),_=n("dkbr");function x(e,t){1&e&&(y.bc(0,"div",5),y.Oc(1,"OGGI"),y.ac())}function k(e,t){1&e&&y.Wb(0,"zlife-icon",13)}function S(e,t){1&e&&y.Wb(0,"zlife-icon",14)}function D(e,t){1&e&&y.Wb(0,"zlife-icon",15)}function J(e,t){if(1&e){var n=y.cc();y.bc(0,"div",6),y.kc("click",(function(){y.Ec(n);var e=t.$implicit;return y.nc().onClickHandler(e)})),y.bc(1,"div",7),y.Oc(2),y.oc(3,"date"),y.ac(),y.bc(4,"div",8),y.Oc(5),y.ac(),y.bc(6,"div",9),y.Mc(7,k,1,0,"zlife-icon",10),y.Mc(8,S,1,0,"zlife-icon",11),y.Mc(9,D,1,0,"zlife-icon",12),y.ac(),y.ac()}if(2&e){var o=t.$implicit;y.tc("ngClass",o.type),y.Jb(2),y.Pc(y.qc(3,7,o.date,"HH:mm")),y.Jb(3),y.Pc(o.name),y.Jb(1),y.tc("ngSwitch",o.type),y.Jb(1),y.tc("ngSwitchCase","autovalutazione"),y.Jb(1),y.tc("ngSwitchCase","farmaco"),y.Jb(1),y.tc("ngSwitchCase","visita")}}function R(e,t){1&e&&(y.bc(0,"div"),y.bc(1,"div",16),y.bc(2,"div",8),y.Oc(3,"Non ci sono eventi oggi."),y.ac(),y.ac(),y.ac())}var E=function(){function e(){this.onClick=new y.p}return e.prototype.onClickHandler=function(e){this.onClick.emit(e)},e.prototype.isToday=function(e){return g(e).isSame(g(),"day")},e.prototype.ngOnChanges=function(e){if(e.allEvents){var t=g(this.date);this.eventsOnMyDate=this.allEvents.filter((function(e){return g(e.date).isSame(t,"day")}))}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=y.Pb({type:e,selectors:[["zlife-calendario-giorno"]],inputs:{date:"date",allEvents:"allEvents",isLoading:"isLoading"},outputs:{onClick:"onClick"},features:[y.Hb],decls:7,vars:6,consts:[[1,"container"],["class","today",4,"ngIf"],[1,"header"],["class","evento-container","class","evento",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"today"],[1,"evento",3,"ngClass","click"],[1,"hours"],[1,"name"],[1,"icon",3,"ngSwitch"],["name","scheda",4,"ngSwitchCase"],["name","pillola",4,"ngSwitchCase"],["name","chiamata-dottore",4,"ngSwitchCase"],["name","scheda"],["name","pillola"],["name","chiamata-dottore"],[1,"evento","empty"]],template:function(e,t){1&e&&(y.bc(0,"div",0),y.Mc(1,x,2,0,"div",1),y.bc(2,"div",2),y.Oc(3),y.oc(4,"date"),y.ac(),y.Mc(5,J,10,10,"div",3),y.Mc(6,R,4,0,"div",4),y.ac()),2&e&&(y.Jb(1),y.tc("ngIf",t.isToday(t.date)),y.Jb(2),y.Pc(y.pc(4,4,t.date)),y.Jb(2),y.tc("ngForOf",t.eventsOnMyDate),y.Jb(1),y.tc("ngIf",0===(null==t.eventsOnMyDate?null:t.eventsOnMyDate.length)))},directives:[o.m,o.l,o.k,o.o,o.p,_.i],pipes:[o.e],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{margin-top:0;font-size:var(--font-size-7);margin-bottom:8px}.header[_ngcontent-%COMP%], .today[_ngcontent-%COMP%]{margin-left:24px;font-weight:500}.today[_ngcontent-%COMP%]{font-size:var(--font-size-2)}.evento[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:24px;margin-top:5px}.evento.farmaco[_ngcontent-%COMP%]{background-color:var(--ion-light-red)}.evento.visita[_ngcontent-%COMP%]{background-color:var(--ion-light-green)}.evento.autovalutazione[_ngcontent-%COMP%]{background-color:var(--ion-light-blue)}.evento.empty[_ngcontent-%COMP%]{background-color:var(--ion-color-light)}.evento[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:16px;font-size:var(--font-size-3)}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:auto}.evento[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{font-weight:600;font-size:var(--font-size-4)}"]}),e}();function I(e,t){if(1&e){var n=y.cc();y.Zb(0),y.bc(1,"zlife-calendario-giorno",4),y.kc("onClick",(function(e){return y.Ec(n),y.nc(2).onClick(e)})),y.oc(2,"async"),y.oc(3,"async"),y.ac(),y.Yb()}if(2&e){var o=t.$implicit,a=y.nc(2);y.Jb(1),y.tc("date",o)("allEvents",y.pc(2,3,a.events$))("isLoading",y.pc(3,5,a.isLoading$))}}function L(e,t){if(1&e){var n=y.cc();y.bc(0,"zlife-list-scroller",2),y.kc("onBottomReached",(function(){return y.Ec(n),y.nc().onBottomReach()})),y.oc(1,"async"),y.Mc(2,I,4,7,"ng-container",3),y.ac()}if(2&e){var o=y.nc();y.tc("loading",y.pc(1,3,o.isLoading$))("maxPagesNumber",o.maxPages),y.Jb(2),y.tc("ngForOf",o.dateRange)}}var T=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.maxPages=5,this.events$=this.store.select(C),this.isLoading$=this.store.select(j)}return e.prototype.ionViewWillEnter=function(){var e=g().startOf("day").add(1,"ms"),t=e.clone().add(1,"week"),n=e.toISOString(),o=t.toISOString();this.dateRange=d.a.enumerateAllBetween(n,o),this.store.dispatch(b({startDate:n,endDate:o,dispatchToRemote:!1})),this.store.dispatch(v({startDate:n,endDate:o,dispatchToRemote:!1}))},e.prototype.onBottomReach=function(){var e=this;this.store.select(P).pipe(Object(f.a)(1),Object(u.a)((function(e){return!e.calendarioPage.isLoading}))).subscribe((function(t){var n=g(t.calendarioPage.endDate).add(1,"week").toISOString();e.dateRange=d.a.enumerateAllBetween(t.calendarioPage.startDate,n),e.store.dispatch(b({startDate:t.calendarioPage.startDate,endDate:n,dispatchToRemote:!1})),e.store.dispatch(v({startDate:t.calendarioPage.endDate,endDate:n,dispatchToRemote:!1}))}))},e.prototype.onClick=function(e){this.store.dispatch(O({event:e,dispatchToRemote:!0})),this.router.navigate(["evento"],{relativeTo:this.activatedRoute})},e.prototype.ionViewDidLeave=function(){this.store.dispatch(m({dispatchToRemote:!1}))},e.\u0275fac=function(t){return new(t||e)(y.Vb(i.h),y.Vb(l.j),y.Vb(l.a))},e.\u0275cmp=y.Pb({type:e,selectors:[["zlife-calendario-page"]],features:[y.Ib([{provide:r.i,useFactory:r.i.create([r.j,"calendarioPage"])}])],decls:5,vars:3,consts:[["padding",""],["scrollName","calendario",3,"loading","maxPagesNumber","onBottomReached",4,"ngIf"],["scrollName","calendario",3,"loading","maxPagesNumber","onBottomReached"],[4,"ngFor","ngForOf"],[3,"date","allEvents","isLoading","onClick"]],template:function(e,t){1&e&&(y.bc(0,"ion-header"),y.Wb(1,"zlife-status-bar"),y.ac(),y.bc(2,"ion-content",0),y.Mc(3,L,3,5,"zlife-list-scroller",1),y.oc(4,"async"),y.ac()),2&e&&(y.Jb(3),y.tc("ngIf",y.pc(4,1,t.events$).length>0))},directives:[a.j,z.a,a.f,o.m,w.a,o.l,E],pipes:[o.b],styles:[".zlife-calendario__container[_ngcontent-%COMP%]{padding:20px}zlife-calendario-giorno[_ngcontent-%COMP%]{margin-top:64px;padding-left:64px;padding-right:64px}zlife-calendario-giorno[_ngcontent-%COMP%]:first-of-type{margin-top:16px}"],changeDetection:0}),e}(),$=n("67Y/"),F=function(){function e(e,t){this.store=e,this.router=t}return e.prototype.canActivate=function(e,t){var n=this;return this.store.select((function(e){return e.calendario.calendarioPage.selectedEvent})).pipe(Object($.a)((function(e){return!!e})),Object($.a)((function(e){return e||n.router.navigate(["calendario"]),e})))},e.\u0275fac=function(t){return new(t||e)(y.gc(i.h),y.gc(l.j))},e.\u0275prov=y.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),A=n("sSbh");function q(e,t){1&e&&y.Wb(0,"zlife-icon",14)}function W(e,t){1&e&&y.Wb(0,"zlife-icon",15)}function H(e,t){1&e&&y.Wb(0,"zlife-icon",16)}function V(e,t){if(1&e&&(y.bc(0,"div",2),y.bc(1,"div",3),y.Oc(2,"Hai preso il farmaco?"),y.ac(),y.bc(3,"div"),y.bc(4,"div",4),y.bc(5,"div",5),y.Oc(6),y.ac(),y.bc(7,"div"),y.bc(8,"div",6),y.Oc(9,"ORE"),y.ac(),y.bc(10,"div",7),y.Oc(11),y.oc(12,"date"),y.ac(),y.ac(),y.ac(),y.bc(13,"div",8),y.Mc(14,q,1,0,"zlife-icon",9),y.Mc(15,W,1,0,"zlife-icon",10),y.Mc(16,H,1,0,"zlife-icon",11),y.ac(),y.ac(),y.Wb(17,"zlife-ngrx-button",12),y.Wb(18,"zlife-ngrx-button",13),y.ac()),2&e){var n=t.ngIf;y.Jb(3),y.Mb("evento ",n.type,""),y.Jb(3),y.Qc(" ",n.name," "),y.Jb(5),y.Pc(y.qc(12,9,n.date,"HH:mm")),y.Jb(2),y.tc("ngSwitch",n.type),y.Jb(1),y.tc("ngSwitchCase","autovalutazione"),y.Jb(1),y.tc("ngSwitchCase","farmaco"),y.Jb(1),y.tc("ngSwitchCase","visita")}}var N=[{path:"",component:T},{path:"evento",component:function(){function e(e){this.store=e,this.event$=this.store.select(M)}return e.\u0275fac=function(t){return new(t||e)(y.Vb(i.h))},e.\u0275cmp=y.Pb({type:e,selectors:[["zlife-evento-page"]],features:[y.Ib([{provide:r.i,useFactory:r.i.create([r.j,"eventoPage"])}])],decls:5,vars:3,consts:[["padding",""],["class","container",4,"ngIf"],[1,"container"],[1,"title"],[1,"info"],[1,"name"],[1,"label"],[1,"hours"],[1,"icon",3,"ngSwitch"],["name","scheda",4,"ngSwitchCase"],["name","pillola",4,"ngSwitchCase"],["name","chiamata-dottore",4,"ngSwitchCase"],["text","Ho preso il farmaco","elementId","confirm",1,"green"],["text","No","elementId","cancel",1,"blue"],["name","scheda"],["name","pillola"],["name","chiamata-dottore"]],template:function(e,t){1&e&&(y.bc(0,"ion-header"),y.Wb(1,"zlife-status-bar"),y.ac(),y.bc(2,"ion-content",0),y.Mc(3,V,19,12,"div",1),y.oc(4,"async"),y.ac()),2&e&&(y.Jb(3),y.tc("ngIf",y.pc(4,1,t.event$)))},directives:[a.j,z.a,a.f,o.m,o.o,o.p,A.a,_.i],pipes:[o.b,o.e],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:center;justify-content:center}.title[_ngcontent-%COMP%]{font-size:var(--font-size-12);margin-bottom:28px}.evento[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:row;width:80%;border-radius:8px}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:auto}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   zlife-icon[_ngcontent-%COMP%]{--height:68px}.evento.farmaco[_ngcontent-%COMP%]{background-color:var(--ion-light-red)}.evento.visita[_ngcontent-%COMP%]{background-color:var(--ion-light-green)}.evento.autovalutazione[_ngcontent-%COMP%]{background-color:var(--ion-light-blue)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:var(--font-size-10)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-top:32px;font-size:var(--font-size-1)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{font-size:var(--font-size-7);font-weight:700}zlife-ngrx-button[_ngcontent-%COMP%]{width:80%;margin-top:16px}zlife-ngrx-button.blue[_ngcontent-%COMP%]{--border:4px solid var(--ion-color-primary);--background-color:var(--ion-color-primary);--border-hover:4px solid var(--ion-color-primary-shade);--background-color-hover:var(--ion-color-primary-shade)}zlife-ngrx-button.blue[_ngcontent-%COMP%], zlife-ngrx-button.green[_ngcontent-%COMP%]{--font-weight:bold;--default-font-size:var(--font-size-4);--font-color:#fff;--font-color-hover:#fff}zlife-ngrx-button.green[_ngcontent-%COMP%]{--border:4px solid var(--ion-color-success-shade);--background-color:var(--ion-color-success-shade);--border-hover:4px solid var(--ion-color-success-tint);--background-color-hover:var(--ion-color-success-tint)}"]}),e}(),canActivate:[F]}],B=function(){function e(){}return e.\u0275mod=y.Tb({type:e}),e.\u0275inj=y.Sb({factory:function(t){return new(t||e)},imports:[[l.l.forChild(N)],l.l]}),e}(),Z=n("F/XL"),G=n("15JJ"),U=n("9Z1F"),Y=n("AytR"),Q=n("cUzu"),X=function(){function e(e){this.http=e}return e.prototype.getEvents=function(e,t){return this.http.get(Y.a.server.url+"/events/"+e+"/"+t)},e.\u0275fac=function(t){return new(t||e)(y.gc(Q.b))},e.\u0275prov=y.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),K=function(){function e(e,t,n){var o=this;this.actions$=e,this.calendarioService=t,this.store=n,this.loadEvents$=Object(c.c)((function(){return o.actions$.pipe(Object(c.d)(v),Object(r.r)(o.store),Object(G.a)((function(e){return o.calendarioService.getEvents(e.startDate,e.endDate).pipe(Object($.a)((function(e){return p({events:e,dispatchToRemote:!0})})),Object(U.a)((function(e){return Object(Z.a)(h({error:e,dispatchToRemote:!0}))})))})))}))}return e.\u0275fac=function(t){return new(t||e)(y.gc(c.a),y.gc(X),y.gc(i.h))},e.\u0275prov=y.Rb({token:e,factory:e.\u0275fac}),e}(),ee=n("mrSG"),te={calendarioPage:{startDate:null,endDate:null,selectedEvent:null,events:[],isLoading:!1},eventoPage:{}},ne=Object(i.p)(te,Object(i.r)(b,(function(e,t){return Object(ee.a)(Object(ee.a)({},e),{calendarioPage:Object(ee.a)(Object(ee.a)({},e.calendarioPage),{startDate:t.startDate,endDate:t.endDate})})})),Object(i.r)(v,(function(e,t){return Object(ee.a)(Object(ee.a)({},e),{calendarioPage:Object(ee.a)(Object(ee.a)({},e.calendarioPage),{isLoading:!0})})})),Object(i.r)(p,(function(e,t){return Object(ee.a)(Object(ee.a)({},e),{calendarioPage:Object(ee.a)(Object(ee.a)({},e.calendarioPage),{isLoading:!1,events:Object(ee.h)(e.calendarioPage.events,t.events)})})})),Object(i.r)(h,(function(e,t){return Object(ee.a)(Object(ee.a)({},e),{calendarioPage:Object(ee.a)(Object(ee.a)({},e.calendarioPage),{isLoading:!1})})})),Object(i.r)(O,(function(e,t){return Object(ee.a)(Object(ee.a)({},e),{calendarioPage:Object(ee.a)(Object(ee.a)({},e.calendarioPage),{selectedEvent:t.event})})})),Object(i.r)(m,(function(e,t){return Object(ee.a)(Object(ee.a)({},te),{calendarioPage:Object(ee.a)(Object(ee.a)({},te.calendarioPage),{selectedEvent:e.calendarioPage.selectedEvent})})})));function oe(e,t){return ne(e,t)}var ae=function(){function e(){}return e.\u0275mod=y.Tb({type:e}),e.\u0275inj=y.Sb({factory:function(t){return new(t||e)},imports:[[o.c,B,s.a,a.q,r.c,i.j.forFeature(r.j,oe),c.b.forFeature([K])]]}),e}()}}]);