(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"4NTb":function(t,e,i){"use strict";i.r(e),i.d(e,"MisurazioneModule",(function(){return F}));var n=i("Valr"),r=i("sPEm"),o=i("w1ql"),s=i("6onV"),a=i("iLY4"),u=i("PcmI"),c=i("ey9i"),h=(i("yLV6"),i("PCNd")),l=i("DUip"),p=i("wd/R"),f=Object(s.q)((function(t){return t.misurazione}),(function(t){return t.misurazioniPage.misurazione})),d=i("TYT/"),v=function(t){return t[t.FrequenzaCardiaca=0]="FrequenzaCardiaca",t[t.Pressione=1]="Pressione",t[t.Peso=2]="Peso",t[t.Saturazione=3]="Saturazione",t[t.Temperatura=4]="Temperatura",t}({}),m=i("AytR"),g=i("15JJ"),y=Object(s.n)("[Feature Misurazione] Load misurazione",Object(c.p)()),b=Object(s.n)("[Feature Misurazione] Success load misurazione",Object(c.p)()),T=i("cUzu"),z=i("Kp+N"),E=function(){function t(t,e,i,n){var r=this;this.http=t,this.store=e,this.route=i,this.socket=n,this.baseUrl=m.a.server.url,this.prevRequest=null,this.socket.fromEvent("user/MisurazioniStateUpdate").subscribe((function(){r.dispatchLoadAction(r.prevRequest)}))}return t.prototype.getMisurazione=function(t){var e=this;return this.store.select((function(t){return t.remoteSession.userId})).pipe(Object(g.a)((function(i){return e.http.post(e.baseUrl+"/misurazioni",{userId:i,richiesta:t})})))},t.prototype.getTipologiaMisurazione=function(){switch(this.route.snapshot.params.measure){case"heart":return v.FrequenzaCardiaca;case"temperature":return v.Temperatura;case"pressure":return v.Pressione;case"weight":return v.Peso;case"saturation":return v.Saturazione;default:return null}},t.prototype.getDefaultIntervallo=function(){return 10080},t.prototype.dispatchLoadAction=function(t){this.prevRequest=t,this.store.dispatch(y({richiesta:t,dispatchToRemote:!0}))},t.prototype.getRoundTo=function(t){switch(t){case 240:case 1440:return"day";case 10080:return"week";case 43800:return"month";default:return"week"}},t.\u0275fac=function(e){return new(e||t)(d.fc(T.b),d.fc(s.h),d.fc(l.a),d.fc(z.a))},t.\u0275prov=d.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),x=i("vqQA"),I=i("sSbh"),S=i("dkbr"),D=i("mrSG");function M(t,e){if(1&t&&d.Vb(0,"kendo-chart-series-item",3),2&t){var i=e.$implicit,n=d.mc();d.Jc("smooth"),d.sc("data",i)("labels",n.graphPointsLabels)}}var O=function(){function t(){var t=this;this.graphDays=[],this.graphValues=[],this.graphPointsLabels={color:"white",visible:!0,background:"red",padding:10,margin:5},this.graphYAxisLabel={content:function(e){return e.value+" "+t.misurazione.unitaDiMisura},font:"bold 14px Arial"},this.graphXAxisLabel={font:"bold 14px Arial"}}return t.prototype.ngOnChanges=function(){var t=this;this.graphDays=[],this.graphValues=[],this.misurazione.dati.forEach((function(e){t.graphDays.push(p(e.data).format("D[\n]MMMM")),e.valori.forEach((function(e,i){t.graphValues[i]||(t.graphValues[i]=[]),t.graphValues[i].push(e.value)}))})),this.graphYAxisRange={max:Math.max.apply(Math,Object(D.h)(this.misurazione.fasce.map((function(t){return t.value.max})))),min:Math.min.apply(Math,Object(D.h)(this.misurazione.fasce.map((function(t){return t.value.min}))))}},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Ob({type:t,selectors:[["zlife-graph"]],inputs:{misurazione:"misurazione"},features:[d.Gb],decls:8,vars:6,consts:[[3,"labels","max","min"],[3,"categories","labels"],["type","line",3,"data","style","labels",4,"ngFor","ngForOf"],["type","line",3,"data","labels"]],template:function(t,e){1&t&&(d.ac(0,"kendo-chart"),d.Vb(1,"kendo-chart-title"),d.ac(2,"kendo-chart-value-axis"),d.Vb(3,"kendo-chart-value-axis-item",0),d.Zb(),d.ac(4,"kendo-chart-category-axis"),d.Vb(5,"kendo-chart-category-axis-item",1),d.Zb(),d.ac(6,"kendo-chart-series"),d.Lc(7,M,1,4,"kendo-chart-series-item",2),d.Zb(),d.Zb()),2&t&&(d.Ib(3),d.sc("labels",e.graphYAxisLabel)("max",e.graphYAxisRange.max)("min",e.graphYAxisRange.min),d.Ib(2),d.sc("categories",e.graphDays)("labels",e.graphXAxisLabel),d.Ib(2),d.sc("ngForOf",e.graphValues))},directives:[u.c,u.g,u.h,u.i,u.a,u.b,u.e,n.k,u.f],styles:[""]}),t}();function A(t,e){if(1&t){var i=d.bc();d.ac(0,"zlife-ngrx-button",11),d.jc("onClick",(function(){d.Dc(i);var t=e.$implicit;return d.mc().setGraphRange(t)})),d.Zb()}if(2&t){var n=e.$implicit,r=d.mc();d.sc("elementId","btn"+n)("text",r.getTitle(n))}}function _(t,e){if(1&t&&d.Vb(0,"zlife-graph",12),2&t){var i=d.mc();d.sc("misurazione",i.misurazione)}}var C=[{path:"",component:function(){function t(t,e){var i=this;this.misurazioneService=e,this.tipologiaCorrente=e.getTipologiaMisurazione(),this.intervalloSelezionato=e.getDefaultIntervallo(),t.select(f).subscribe((function(t){i.misurazione=t,t&&(i.intervalli=t.intervalli,i.updateLabels())})),this.startDate=p().startOf(this.misurazioneService.getRoundTo(this.intervalloSelezionato)),this.updateGraph()}return t.prototype.setGraphRange=function(t){this.intervalloSelezionato=t,this.startDate=p().startOf(this.misurazioneService.getRoundTo(t)),this.updateGraph()},t.prototype.getTitle=function(t){return p.duration(t,"minutes").humanize()},t.prototype.getEndDate=function(t){return t.clone().add(this.intervalloSelezionato,"minutes")},t.prototype.formatDate=function(t){return t.format("D MMMM")},t.prototype.backButton=function(){this.startDate.subtract(this.intervalloSelezionato,"minutes"),this.updateGraph()},t.prototype.forwardButton=function(){this.startDate.add(this.intervalloSelezionato,"minutes"),this.updateGraph()},t.prototype.updateGraph=function(){var t=this.getEndDate(this.startDate);this.misurazioneService.dispatchLoadAction({dataInizio:this.startDate.toISOString(),dataFine:t.toISOString(),tipologia:this.tipologiaCorrente})},t.prototype.updateLabels=function(){var t=[],e=[],i=[],n=0;if(this.misurazione.dati.forEach((function(r){r.valori.forEach((function(n,r){(!t[r]||t[r]>n.value)&&(t[r]=n.value),(!e[r]||e[r]<n.value)&&(e[r]=n.value),i[r]?i[r]+=n.value:i[r]=n.value})),r.valori&&r.valori.length>0&&n++})),0===n)t=new Array(this.misurazione.dati.length).fill(0),e=new Array(this.misurazione.dati.length).fill(0),i=new Array(this.misurazione.dati.length).fill(0);else for(var r=0;r<i.length;r++)i[r]/=n;this.minValueText=t.toString()+" "+this.misurazione.unitaDiMisura+"\nMINIMO",this.maxValueText=e.toString()+" "+this.misurazione.unitaDiMisura+"\nMASSIMO",this.meanValueText=i.toString()+" "+this.misurazione.unitaDiMisura+"\nMEDIA"},t.\u0275fac=function(e){return new(e||t)(d.Ub(s.h),d.Ub(E))},t.\u0275cmp=d.Ob({type:t,selectors:[["zlife-misurazioni"]],features:[d.Hb([{provide:c.f,useFactory:c.f.create([c.l,"misurazioniPage"])}])],decls:16,vars:11,consts:[["padding",""],[1,"zlife-misurazioni__left-div"],["icon","prev","type","round","elementId","btnPrev",3,"onClick"],[1,"zlife-misurazioni__p-range"],["icon","next","type","round","elementId","btnNext",3,"onClick"],[1,"zlife-misurazioni__right-div"],[3,"elementId","text","onClick",4,"ngFor","ngForOf"],[3,"misurazione",4,"ngIf"],[3,"backgroundColor"],[3,"text"],[1,"zlife-misurazioni__btn-misura",3,"icon","elementId","text"],[3,"elementId","text","onClick"],[3,"misurazione"]],template:function(t,e){1&t&&(d.ac(0,"ion-header"),d.Vb(1,"zlife-status-bar"),d.Zb(),d.ac(2,"ion-content",0),d.ac(3,"div",1),d.ac(4,"zlife-ngrx-button",2),d.jc("onClick",(function(){return e.backButton()})),d.Zb(),d.ac(5,"p",3),d.Nc(6),d.Zb(),d.ac(7,"zlife-ngrx-button",4),d.jc("onClick",(function(){return e.forwardButton()})),d.Zb(),d.Zb(),d.ac(8,"div",5),d.Lc(9,A,1,2,"zlife-ngrx-button",6),d.Zb(),d.Lc(10,_,1,1,"zlife-graph",7),d.Zb(),d.ac(11,"zlife-footer",8),d.Vb(12,"zlife-label",9),d.Vb(13,"zlife-label",9),d.Vb(14,"zlife-label",9),d.Vb(15,"zlife-ngrx-button",10),d.Zb()),2&t&&(d.Ib(6),d.Qc("",e.formatDate(e.startDate)," - ",e.formatDate(e.getEndDate(e.startDate)),""),d.Ib(3),d.sc("ngForOf",e.intervalli),d.Ib(1),d.sc("ngIf",e.misurazione&&e.misurazione.dati.length>0),d.Ib(1),d.sc("backgroundColor","#b6d9db"),d.Ib(1),d.sc("text",e.minValueText),d.Ib(1),d.sc("text",e.maxValueText),d.Ib(1),d.sc("text",e.meanValueText),d.Ib(1),d.sc("icon","icon_misura")("elementId","btnMeasure")("text","Misura"))},directives:[r.k,x.a,r.g,I.a,n.k,n.l,S.d,S.f,O],styles:[".zlife-misurazioni__left-div[_ngcontent-%COMP%]{text-align:left}.zlife-misurazioni__right-div[_ngcontent-%COMP%]{text-align:right;margin:20px}.zlife-misurazioni__p-range[_ngcontent-%COMP%]{display:inline-block}.zlife-misurazioni__btn-misura[_ngcontent-%COMP%]{float:right}"]}),t}()}],P=function(){function t(){}return t.\u0275mod=d.Sb({type:t}),t.\u0275inj=d.Rb({factory:function(e){return new(e||t)},imports:[[l.l.forChild(C)],l.l]}),t}(),w=i("67Y/"),k=function(){function t(t,e){var i=this;this.actions$=t,this.misurazioneService=e,this.graphStateReceived$=Object(o.c)((function(){return i.actions$.pipe(Object(o.d)(y),Object(g.a)((function(t){return i.misurazioneService.getMisurazione(t.richiesta)})),Object(w.a)((function(t){return b({misurazione:t,dispatchToRemote:!0})})))}))}return t.\u0275fac=function(e){return new(e||t)(d.fc(o.a),d.fc(E))},t.\u0275prov=d.Qb({token:t,factory:t.\u0275fac}),t}(),R=Object(s.p)({misurazioniPage:{misurazione:null}},Object(s.r)(b,(function(t,e){return Object(D.a)(Object(D.a)({},t),{misurazioniPage:Object(D.a)(Object(D.a)({},t.misurazioniPage),{misurazione:e.misurazione})})})));function V(t,e){return R(t,e)}var F=function(){function t(){}return t.\u0275mod=d.Sb({type:t}),t.\u0275inj=d.Rb({factory:function(e){return new(e||t)},imports:[[n.c,P,r.r,c.b,u.d,h.a,a.b,a.c,s.j.forFeature(c.l,V),o.b.forFeature([k])]]}),t}()},yLV6:function(t,e,i){var n;!function(r,o,s,a){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],h=o.createElement("div"),l=Math.round,p=Math.abs,f=Date.now;function d(t,e,i){return setTimeout(z(t,i),e)}function v(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function g(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,n,i),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var y=g((function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&void 0===t[n[r]])&&(t[n[r]]=e[n[r]]),r++;return t}),"extend","Use `assign`."),b=g((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&u(n,i)}function z(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function x(t,e){return void 0===t?e:t}function I(t,e,i){m(O(e),(function(e){t.addEventListener(e,i,!1)}))}function S(t,e,i){m(O(e),(function(e){t.removeEventListener(e,i,!1)}))}function D(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function O(t){return t.trim().split(/\s+/g)}function A(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function C(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];A(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function P(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((n=(i=c[o])?i+r:e)in t)return n;o++}}var w=1;function k(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var R="ontouchstart"in r,V=void 0!==P(r,"PointerEvent"),F=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Y=["x","y"],j=["clientX","clientY"];function L(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function N(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=1&e&&n-r==0,s=12&e&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=X(e)),r>1&&!i.firstMultiple?i.firstMultiple=X(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,u=e.center=q(n);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=H(a,u),e.distance=Z(a,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=W(e.deltaX,e.deltaY);var c,h,l=U(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=p(l.x)>p(l.y)?l.x:l.y,e.scale=s?(c=s.pointers,Z((h=n)[0],h[1],j)/Z(c[0],c[1],j)):1,e.rotation=s?function(t,e){return H(e[1],e[0],j)+H(t[1],t[0],j)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(a>25||void 0===s.velocity)){var u=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,h=U(a,u,c);n=h.x,r=h.y,i=p(h.x)>p(h.y)?h.x:h.y,o=W(u,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=o}(i,e);var d=t.element;D(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function X(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:l(t.pointers[i].clientX),clientY:l(t.pointers[i].clientY)},i++;return{timeStamp:f(),pointers:e,center:q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function q(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:l(i/e),y:l(n/e)}}function U(t,e,i){return{x:e/t||0,y:i/t||0}}function W(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function Z(t,e,i){i||(i=Y);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function H(t,e,i){return i||(i=Y),180*Math.atan2(e[i[1]]-t[i[1]],e[i[0]]-t[i[0]])/Math.PI}L.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(k(this.element),this.evWin,this.domHandler)}};var G={mousedown:1,mousemove:2,mouseup:4};function $(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,L.apply(this,arguments)}T($,L,{handler:function(t){var e=G[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var B={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",K="pointermove pointerup pointercancel";function tt(){this.evEl=Q,this.evWin=K,L.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(Q="MSPointerDown",K="MSPointerMove MSPointerUp MSPointerCancel"),T(tt,L,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=B[n],o=J[t.pointerType]||t.pointerType,s="touch"==o,a=A(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function it(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,L.apply(this,arguments)}function nt(t,e){var i=_(t.touches),n=_(t.changedTouches);return 12&e&&(i=C(i.concat(n),"identifier",!0)),[i,n]}T(it,L,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var i=nt.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ot(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},L.apply(this,arguments)}function st(t,e){var i=_(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=_(t.changedTouches),a=[],u=this.target;if(o=i.filter((function(t){return D(t.target,u)})),1===e)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),12&e&&delete n[s[r].identifier],r++;return a.length?[C(o.concat(a),"identifier",!0),a]:void 0}function at(){L.apply(this,arguments);var t=z(this.handler,this);this.touch=new ot(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ut(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ct.call(this,e)):12&t&&ct.call(this,e)}function ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function ht(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),s=Math.abs(i-r.y);if(o<=25&&s<=25)return!0}return!1}T(ot,L,{handler:function(t){var e=rt[t.type],i=st.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}),T(at,L,{handler:function(t,e,i){var n="mouse"==i.pointerType;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if("touch"==i.pointerType)ut.call(this,e,i);else if(n&&ht.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var lt=P(h.style,"touchAction"),pt=void 0!==lt,ft=function(){if(!pt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||r.CSS.supports("touch-action",i)})),t}();function dt(t,e){this.manager=t,this.set(e)}function vt(t){this.options=u({},this.defaults,t||{}),this.id=w++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function mt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function gt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function yt(t,e){var i=e.manager;return i?i.get(t):t}function bt(){vt.apply(this,arguments)}function Tt(){bt.apply(this,arguments),this.pX=null,this.pY=null}function zt(){bt.apply(this,arguments)}function Et(){vt.apply(this,arguments),this._timer=null,this._input=null}function xt(){bt.apply(this,arguments)}function It(){bt.apply(this,arguments)}function St(){vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Dt(t,e){return(e=e||{}).recognizers=x(e.recognizers,Dt.defaults.preset),new Mt(t,e)}function Mt(t,e){var i;this.options=u({},Dt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(V?tt:F?ot:R?at:$))(i,N),this.touchAction=new dt(this,this.options.touchAction),Ot(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ot(t,e){var i,n=t.element;n.style&&(m(t.options.cssProps,(function(r,o){i=P(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}dt.prototype={set:function(t){"compute"==t&&(t=this.compute()),pt&&this.manager.element.style&&ft[t]&&(this.manager.element.style[lt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(M(t,"none"))return"none";var e=M(t,"pan-x"),i=M(t,"pan-y");return e&&i?"none":e||i?e?"pan-x":"pan-y":M(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=M(n,"none")&&!ft.none,o=M(n,"pan-y")&&!ft["pan-y"],s=M(n,"pan-x")&&!ft["pan-x"];if(r&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return r||o&&6&i||s&&24&i?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},vt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)||(t=yt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===A(e,t=yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=yt(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+mt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+mt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(bt,vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:32}}),T(Tt,bt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?1:s<0?8:16,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return bt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=gt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(zt,bt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),T(Et,vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),T(xt,bt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),T(It,bt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Tt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:24&i&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=gt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T(St,vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||Z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Dt.VERSION="2.0.7",Dt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[xt,{enable:!1}],[zt,{enable:!1},["rotate"]],[It,{direction:6}],[Tt,{direction:6},["swipe"]],[St],[St,{event:"doubletap",taps:2},["tap"]],[Et]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Mt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof vt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=A(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var i=this.handlers;return m(O(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var i=this.handlers;return m(O(t),(function(t){e?i[t]&&i[t].splice(A(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Dt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Mt,Input:L,TouchAction:dt,TouchInput:ot,MouseInput:$,PointerEventInput:tt,TouchMouseInput:at,SingleTouchInput:it,Recognizer:vt,AttrRecognizer:bt,Tap:St,Pan:Tt,Swipe:It,Pinch:zt,Rotate:xt,Press:Et,on:I,off:S,each:m,merge:b,extend:y,assign:u,inherit:T,bindFn:z,prefixed:P}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Dt,void 0===(n=(function(){return Dt}).call(e,i,e,t))||(t.exports=n)}(window,document)}}]);