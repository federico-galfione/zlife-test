(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Ubiq:function(e,t,n){"use strict";n.r(t),n.d(t,"CalendarioModule",(function(){return ne}));var o=n("Valr"),a=n("sPEm"),c=n("w1ql"),i=n("6onV"),r=n("ey9i"),s=n("PCNd"),l=n("DUip"),d=n("atHm"),g=n("wd/R"),f=n("t9fZ"),u=n("VnD/"),b=Object(i.n)("[Calendario Page] Set initial dates",Object(r.s)()),v=Object(i.n)("[Calendario Page] Load events",Object(r.s)()),p=Object(i.n)("[Calendario Page] Success load events",Object(r.s)()),h=Object(i.n)("[Calendario Page] Failure load events",Object(r.s)()),O=Object(i.n)("[Calendario Page] Set selected event",Object(r.s)()),m=function(e){return e.calendario},P=Object(i.q)(m,(function(e){return e.calendarioPage.events})),C=(Object(i.q)(m,(function(e){return e.calendarioPage.startDate})),Object(i.q)(m,(function(e){return e.calendarioPage.endDate})),Object(i.q)(m,(function(e){return e.calendarioPage.isLoading}))),M=Object(i.q)(m,(function(e){return e.calendarioPage.selectedEvent})),j=n("TYT/"),y=n("vqQA"),z=n("t4Ze"),_=n("dkbr");function w(e,t){1&e&&(j.bc(0,"div",5),j.Oc(1,"OGGI"),j.ac())}function x(e,t){1&e&&j.Wb(0,"zlife-icon",13)}function k(e,t){1&e&&j.Wb(0,"zlife-icon",14)}function S(e,t){1&e&&j.Wb(0,"zlife-icon",15)}function D(e,t){if(1&e){var n=j.cc();j.bc(0,"div",6),j.kc("click",(function(){j.Ec(n);var e=t.$implicit;return j.nc().onClickHandler(e)})),j.bc(1,"div",7),j.Oc(2),j.oc(3,"date"),j.ac(),j.bc(4,"div",8),j.Oc(5),j.ac(),j.bc(6,"div",9),j.Mc(7,x,1,0,"zlife-icon",10),j.Mc(8,k,1,0,"zlife-icon",11),j.Mc(9,S,1,0,"zlife-icon",12),j.ac(),j.ac()}if(2&e){var o=t.$implicit;j.tc("ngClass",o.type),j.Jb(2),j.Pc(j.qc(3,7,o.date,"HH:mm")),j.Jb(3),j.Pc(o.name),j.Jb(1),j.tc("ngSwitch",o.type),j.Jb(1),j.tc("ngSwitchCase","autovalutazione"),j.Jb(1),j.tc("ngSwitchCase","farmaco"),j.Jb(1),j.tc("ngSwitchCase","visita")}}function J(e,t){1&e&&(j.bc(0,"div"),j.bc(1,"div",16),j.bc(2,"div",8),j.Oc(3,"Non ci sono eventi oggi."),j.ac(),j.ac(),j.ac())}var R=function(){function e(){this.onClick=new j.p}return e.prototype.onClickHandler=function(e){this.onClick.emit(e)},e.prototype.isToday=function(e){return g(e).isSame(g(),"day")},e.prototype.ngOnChanges=function(e){if(e.allEvents){var t=g(this.date);this.eventsOnMyDate=this.allEvents.filter((function(e){return g(e.date).isSame(t,"day")}))}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=j.Pb({type:e,selectors:[["zlife-calendario-giorno"]],inputs:{date:"date",allEvents:"allEvents",isLoading:"isLoading"},outputs:{onClick:"onClick"},features:[j.Hb],decls:7,vars:6,consts:[[1,"container"],["class","today",4,"ngIf"],[1,"header"],["class","evento-container","class","evento",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"today"],[1,"evento",3,"ngClass","click"],[1,"hours"],[1,"name"],[1,"icon",3,"ngSwitch"],["name","scheda",4,"ngSwitchCase"],["name","pillola",4,"ngSwitchCase"],["name","chiamata-dottore",4,"ngSwitchCase"],["name","scheda"],["name","pillola"],["name","chiamata-dottore"],[1,"evento","empty"]],template:function(e,t){1&e&&(j.bc(0,"div",0),j.Mc(1,w,2,0,"div",1),j.bc(2,"div",2),j.Oc(3),j.oc(4,"date"),j.ac(),j.Mc(5,D,10,10,"div",3),j.Mc(6,J,4,0,"div",4),j.ac()),2&e&&(j.Jb(1),j.tc("ngIf",t.isToday(t.date)),j.Jb(2),j.Pc(j.pc(4,4,t.date)),j.Jb(2),j.tc("ngForOf",t.eventsOnMyDate),j.Jb(1),j.tc("ngIf",0===(null==t.eventsOnMyDate?null:t.eventsOnMyDate.length)))},directives:[o.m,o.l,o.k,o.o,o.p,_.i],pipes:[o.e],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{margin-top:0;font-size:var(--font-size-7);margin-bottom:8px}.header[_ngcontent-%COMP%], .today[_ngcontent-%COMP%]{margin-left:24px;font-weight:500}.today[_ngcontent-%COMP%]{font-size:var(--font-size-2)}.evento[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:24px;margin-top:5px}.evento.farmaco[_ngcontent-%COMP%]{background-color:var(--ion-light-red)}.evento.visita[_ngcontent-%COMP%]{background-color:var(--ion-light-green)}.evento.autovalutazione[_ngcontent-%COMP%]{background-color:var(--ion-light-blue)}.evento.empty[_ngcontent-%COMP%]{background-color:var(--ion-color-light)}.evento[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:16px;font-size:var(--font-size-3)}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:auto}.evento[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{font-weight:600;font-size:var(--font-size-4)}"]}),e}();function I(e,t){if(1&e){var n=j.cc();j.Zb(0),j.bc(1,"zlife-calendario-giorno",4),j.kc("onClick",(function(e){return j.Ec(n),j.nc(2).onClick(e)})),j.oc(2,"async"),j.oc(3,"async"),j.ac(),j.Yb()}if(2&e){var o=t.$implicit,a=j.nc(2);j.Jb(1),j.tc("date",o)("allEvents",j.pc(2,3,a.events$))("isLoading",j.pc(3,5,a.isLoading$))}}function E(e,t){if(1&e){var n=j.cc();j.bc(0,"zlife-list-scroller",2),j.kc("onBottomReached",(function(){return j.Ec(n),j.nc().onBottomReach()})),j.oc(1,"async"),j.Mc(2,I,4,7,"ng-container",3),j.ac()}if(2&e){var o=j.nc();j.tc("loading",j.pc(1,3,o.isLoading$))("maxPagesNumber",o.maxPages),j.Jb(2),j.tc("ngForOf",o.dateRange)}}var L=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.maxPages=5,this.events$=this.store.select(P),this.isLoading$=this.store.select(C)}return e.prototype.ngOnInit=function(){var e=g().startOf("day").add(1,"ms"),t=e.clone().add(1,"week"),n=e.toISOString(),o=t.toISOString();this.dateRange=d.a.enumerateAllBetween(n,o),this.store.dispatch(b({startDate:n,endDate:o,dispatchToRemote:!1})),this.store.dispatch(v({startDate:n,endDate:o,dispatchToRemote:!1}))},e.prototype.onBottomReach=function(){var e=this;this.store.select(m).pipe(Object(f.a)(1),Object(u.a)((function(e){return!e.calendarioPage.isLoading}))).subscribe((function(t){var n=g(t.calendarioPage.endDate).add(1,"week").toISOString();e.dateRange=d.a.enumerateAllBetween(t.calendarioPage.startDate,n),e.store.dispatch(b({startDate:t.calendarioPage.startDate,endDate:n,dispatchToRemote:!1})),e.store.dispatch(v({startDate:t.calendarioPage.endDate,endDate:n,dispatchToRemote:!1}))}))},e.prototype.onClick=function(e){this.store.dispatch(O({event:e,dispatchToRemote:!0})),this.router.navigate(["evento"],{relativeTo:this.activatedRoute})},e.\u0275fac=function(t){return new(t||e)(j.Vb(i.h),j.Vb(l.j),j.Vb(l.a))},e.\u0275cmp=j.Pb({type:e,selectors:[["zlife-calendario-page"]],features:[j.Ib([{provide:r.f,useFactory:r.f.create([r.g,"calendarioPage"])}])],decls:5,vars:3,consts:[["padding",""],["scrollName","calendario",3,"loading","maxPagesNumber","onBottomReached",4,"ngIf"],["scrollName","calendario",3,"loading","maxPagesNumber","onBottomReached"],[4,"ngFor","ngForOf"],[3,"date","allEvents","isLoading","onClick"]],template:function(e,t){1&e&&(j.bc(0,"ion-header"),j.Wb(1,"zlife-status-bar"),j.ac(),j.bc(2,"ion-content",0),j.Mc(3,E,3,5,"zlife-list-scroller",1),j.oc(4,"async"),j.ac()),2&e&&(j.Jb(3),j.tc("ngIf",j.pc(4,1,t.events$).length>0))},directives:[a.j,y.a,a.f,o.m,z.a,o.l,R],pipes:[o.b],styles:[".zlife-calendario__container[_ngcontent-%COMP%]{padding:20px}zlife-calendario-giorno[_ngcontent-%COMP%]{margin-top:64px;padding-left:64px;padding-right:64px}zlife-calendario-giorno[_ngcontent-%COMP%]:first-of-type{margin-top:16px}"],changeDetection:0}),e}(),T=n("67Y/"),$=function(){function e(e,t){this.store=e,this.router=t}return e.prototype.canActivate=function(e,t){var n=this;return this.store.select((function(e){return e.calendario.calendarioPage.selectedEvent})).pipe(Object(T.a)((function(e){return!!e})),Object(T.a)((function(e){return e||n.router.navigate(["calendario"]),e})))},e.\u0275fac=function(t){return new(t||e)(j.gc(i.h),j.gc(l.j))},e.\u0275prov=j.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),F=n("sSbh");function q(e,t){1&e&&j.Wb(0,"zlife-icon",14)}function H(e,t){1&e&&j.Wb(0,"zlife-icon",15)}function W(e,t){1&e&&j.Wb(0,"zlife-icon",16)}function N(e,t){if(1&e&&(j.bc(0,"div",2),j.bc(1,"div",3),j.Oc(2,"Hai preso il farmaco?"),j.ac(),j.bc(3,"div"),j.bc(4,"div",4),j.bc(5,"div",5),j.Oc(6),j.ac(),j.bc(7,"div"),j.bc(8,"div",6),j.Oc(9,"ORE"),j.ac(),j.bc(10,"div",7),j.Oc(11),j.oc(12,"date"),j.ac(),j.ac(),j.ac(),j.bc(13,"div",8),j.Mc(14,q,1,0,"zlife-icon",9),j.Mc(15,H,1,0,"zlife-icon",10),j.Mc(16,W,1,0,"zlife-icon",11),j.ac(),j.ac(),j.Wb(17,"zlife-ngrx-button",12),j.Wb(18,"zlife-ngrx-button",13),j.ac()),2&e){var n=t.ngIf;j.Jb(3),j.Mb("evento ",n.type,""),j.Jb(3),j.Qc(" ",n.name," "),j.Jb(5),j.Pc(j.qc(12,9,n.date,"HH:mm")),j.Jb(2),j.tc("ngSwitch",n.type),j.Jb(1),j.tc("ngSwitchCase","autovalutazione"),j.Jb(1),j.tc("ngSwitchCase","farmaco"),j.Jb(1),j.tc("ngSwitchCase","visita")}}var B=[{path:"",component:L},{path:"evento",component:function(){function e(e){this.store=e,this.event$=this.store.select(M)}return e.\u0275fac=function(t){return new(t||e)(j.Vb(i.h))},e.\u0275cmp=j.Pb({type:e,selectors:[["zlife-evento-page"]],features:[j.Ib([{provide:r.f,useFactory:r.f.create([r.g,"eventoPage"])}])],decls:5,vars:3,consts:[["padding",""],["class","container",4,"ngIf"],[1,"container"],[1,"title"],[1,"info"],[1,"name"],[1,"label"],[1,"hours"],[1,"icon",3,"ngSwitch"],["name","scheda",4,"ngSwitchCase"],["name","pillola",4,"ngSwitchCase"],["name","chiamata-dottore",4,"ngSwitchCase"],["text","Ho preso il farmaco","elementId","confirm",1,"green"],["text","No","elementId","cancel",1,"blue"],["name","scheda"],["name","pillola"],["name","chiamata-dottore"]],template:function(e,t){1&e&&(j.bc(0,"ion-header"),j.Wb(1,"zlife-status-bar"),j.ac(),j.bc(2,"ion-content",0),j.Mc(3,N,19,12,"div",1),j.oc(4,"async"),j.ac()),2&e&&(j.Jb(3),j.tc("ngIf",j.pc(4,1,t.event$)))},directives:[a.j,y.a,a.f,o.m,o.o,o.p,F.a,_.i],pipes:[o.b,o.e],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;align-items:center;justify-content:center}.title[_ngcontent-%COMP%]{font-size:var(--font-size-12);margin-bottom:28px}.evento[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:row;width:80%;border-radius:8px}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:auto}.evento[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   zlife-icon[_ngcontent-%COMP%]{--height:68px}.evento.farmaco[_ngcontent-%COMP%]{background-color:var(--ion-light-red)}.evento.visita[_ngcontent-%COMP%]{background-color:var(--ion-light-green)}.evento.autovalutazione[_ngcontent-%COMP%]{background-color:var(--ion-light-blue)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:var(--font-size-10)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-top:32px;font-size:var(--font-size-1)}.evento[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .hours[_ngcontent-%COMP%]{font-size:var(--font-size-7);font-weight:700}zlife-ngrx-button[_ngcontent-%COMP%]{width:80%;margin-top:16px}zlife-ngrx-button.blue[_ngcontent-%COMP%]{--border:4px solid var(--ion-color-primary);--background-color:var(--ion-color-primary);--border-hover:4px solid var(--ion-color-primary-shade);--background-color-hover:var(--ion-color-primary-shade)}zlife-ngrx-button.blue[_ngcontent-%COMP%], zlife-ngrx-button.green[_ngcontent-%COMP%]{--font-weight:bold;--default-font-size:var(--font-size-4);--font-color:#fff;--font-color-hover:#fff}zlife-ngrx-button.green[_ngcontent-%COMP%]{--border:4px solid var(--ion-color-success-shade);--background-color:var(--ion-color-success-shade);--border-hover:4px solid var(--ion-color-success-tint);--background-color-hover:var(--ion-color-success-tint)}"]}),e}(),canActivate:[$]}],V=function(){function e(){}return e.\u0275mod=j.Tb({type:e}),e.\u0275inj=j.Sb({factory:function(t){return new(t||e)},imports:[[l.l.forChild(B)],l.l]}),e}(),A=n("F/XL"),Z=n("15JJ"),G=n("9Z1F"),U=n("AytR"),Y=n("cUzu"),Q=function(){function e(e){this.http=e}return e.prototype.getEvents=function(e,t){return this.http.get(U.a.server.url+"/events/"+e+"/"+t)},e.\u0275fac=function(t){return new(t||e)(j.gc(Y.b))},e.\u0275prov=j.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),X=function(){function e(e,t,n){var o=this;this.actions$=e,this.calendarioService=t,this.store=n,this.loadEvents$=Object(c.c)((function(){return o.actions$.pipe(Object(c.d)(v),Object(r.n)(o.store),Object(Z.a)((function(e){return o.calendarioService.getEvents(e.startDate,e.endDate).pipe(Object(T.a)((function(e){return p({events:e,dispatchToRemote:!0})})),Object(G.a)((function(e){return Object(A.a)(h({error:e,dispatchToRemote:!0}))})))})))}))}return e.\u0275fac=function(t){return new(t||e)(j.gc(c.a),j.gc(Q),j.gc(i.h))},e.\u0275prov=j.Rb({token:e,factory:e.\u0275fac}),e}(),K=n("mrSG"),ee=Object(i.p)({calendarioPage:{startDate:null,endDate:null,selectedEvent:null,events:[],isLoading:!1},eventoPage:{}},Object(i.r)(b,(function(e,t){return Object(K.a)(Object(K.a)({},e),{calendarioPage:Object(K.a)(Object(K.a)({},e.calendarioPage),{startDate:t.startDate,endDate:t.endDate})})})),Object(i.r)(v,(function(e,t){return Object(K.a)(Object(K.a)({},e),{calendarioPage:Object(K.a)(Object(K.a)({},e.calendarioPage),{isLoading:!0})})})),Object(i.r)(p,(function(e,t){return Object(K.a)(Object(K.a)({},e),{calendarioPage:Object(K.a)(Object(K.a)({},e.calendarioPage),{isLoading:!1,events:Object(K.h)(e.calendarioPage.events,t.events)})})})),Object(i.r)(h,(function(e,t){return Object(K.a)(Object(K.a)({},e),{calendarioPage:Object(K.a)(Object(K.a)({},e.calendarioPage),{isLoading:!1})})})),Object(i.r)(O,(function(e,t){return Object(K.a)(Object(K.a)({},e),{calendarioPage:Object(K.a)(Object(K.a)({},e.calendarioPage),{selectedEvent:t.event})})})));function te(e,t){return ee(e,t)}var ne=function(){function e(){}return e.\u0275mod=j.Tb({type:e}),e.\u0275inj=j.Sb({factory:function(t){return new(t||e)},imports:[[o.c,V,s.a,a.q,r.b,i.j.forFeature(r.g,te),c.b.forFeature([X])]]}),e}()}}]);