(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Ubiq:function(e,n,t){"use strict";t.r(n),t.d(n,"CalendarioModule",(function(){return R}));var c=t("Valr"),a=t("DUip"),i=t("6onV"),o=t("ey9i"),r=Object(i.n)("[Calendario Page] Load day",Object(o.p)()),l=Object(i.n)("[Calendario Page] Success load day",Object(o.p)()),s=Object(i.n)("[Calendario Page] Inspect event",Object(o.p)()),d=function(e){return e.calendario},f=Object(i.q)(d,(function(e){return e.calendarioPage.days})),u=Object(i.q)(d,(function(e){return e.calendarioPage.inspectEvent})),p=t("26FU"),b=t("P6uZ"),g=t("TYT/"),v=t("AytR"),_=t("cUzu"),h=function(){function e(e,n,t){this.http=e,this.router=n,this.store=t,this.baseUrl=v.a.server.url}return e.prototype.loadDays=function(e,n){return this.http.get(this.baseUrl+"/days/"+e.toISOString()+"/"+n.toISOString())},e.prototype.inspectEvent=function(e){this.store.dispatch(s({event:e,dispatchToRemote:!0})),this.router.navigate(["calendario","evento"])},e.prototype.returnToCalendar=function(){this.router.navigate(["calendario"])},e.\u0275fac=function(n){return new(n||e)(g.fc(_.b),g.fc(a.j),g.fc(i.h))},e.\u0275prov=g.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),y=t("sPEm"),m=t("vqQA"),O=t("t4Ze"),P=function(){function e(){this.onClick=new g.o}return e.prototype.onclickHandler=function(){this.onClick.emit()},e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g.Ob({type:e,selectors:[["zlife-calendario-evento"]],inputs:{event:"event"},outputs:{onClick:"onClick"},decls:9,vars:8,consts:[[1,"zlife-calendario-evento__container",3,"ngClass","click"],[1,"zlife-calendario-evento__data"],[1,"zlife-calendario-evento__icon"],[1,"zlife-calendario-evento__paragraph"]],template:function(e,n){1&e&&(g.ac(0,"div",0),g.jc("click",(function(){return n.onclickHandler()})),g.ac(1,"span"),g.ac(2,"b",1),g.Nc(3),g.nc(4,"date"),g.Zb(),g.ac(5,"p",2),g.Nc(6),g.Zb(),g.ac(7,"p",3),g.Nc(8),g.Zb(),g.Zb(),g.Zb()),2&e&&(g.sc("ngClass","zlife-calendario-evento__bg-"+n.event.type),g.Ib(3),g.Oc(g.pc(4,5,n.event.data,"HH:mm")),g.Ib(3),g.Pc("icon_",n.event.type,""),g.Ib(2),g.Qc("",n.event.name," (",n.event.state,")"))},directives:[c.j],pipes:[c.e],styles:[".zlife-calendario-evento__container[_ngcontent-%COMP%]{height:50px}.zlife-calendario-evento__bg-farmaco[_ngcontent-%COMP%]{background-color:#f08080}.zlife-calendario-evento__bg-visita[_ngcontent-%COMP%]{background-color:#90ee90}.zlife-calendario-evento__bg-autovalutazione[_ngcontent-%COMP%]{background-color:#87cefa}.zlife-calendario-evento__data[_ngcontent-%COMP%]{float:left;padding-top:15px;margin-left:30px}.zlife-calendario-evento__paragraph[_ngcontent-%COMP%]{margin-left:100px;padding-top:15px}.zlife-calendario-evento__icon[_ngcontent-%COMP%]{float:right;margin-right:30px}"]}),e}();function z(e,n){if(1&e){var t=g.bc();g.ac(0,"zlife-calendario-evento",2),g.jc("onClick",(function(){g.Dc(t);var e=n.$implicit;return g.mc().onClickHandler(e)})),g.Zb()}2&e&&g.sc("event",n.$implicit)}var C=function(){function e(){this.onClick=new g.o}return e.prototype.onClickHandler=function(e){this.onClick.emit(e)},e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g.Ob({type:e,selectors:[["zlife-calendario-giorno"]],inputs:{giorno:"giorno"},outputs:{onClick:"onClick"},decls:5,vars:5,consts:[[1,"zlife-calendario-giorno__header"],[3,"event","onClick",4,"ngFor","ngForOf"],[3,"event","onClick"]],template:function(e,n){1&e&&(g.ac(0,"div"),g.ac(1,"h1",0),g.Nc(2),g.nc(3,"date"),g.Zb(),g.Lc(4,z,1,1,"zlife-calendario-evento",1),g.Zb()),2&e&&(g.Ib(2),g.Oc(g.pc(3,2,n.giorno.data,"d EEEE")),g.Ib(2),g.sc("ngForOf",n.giorno.events))},directives:[c.k,P],pipes:[c.e],styles:[".zlife-calendario-giorno__header[_ngcontent-%COMP%]{padding-left:20px}"]}),e}();function j(e,n){if(1&e){var t=g.bc();g.Yb(0),g.ac(1,"zlife-calendario-giorno",4),g.jc("onClick",(function(e){return g.Dc(t),g.mc(2).eventClicked(e)})),g.Zb(),g.Xb()}if(2&e){var c=n.$implicit;g.Ib(1),g.sc("giorno",c)}}function k(e,n){if(1&e){var t=g.bc();g.ac(0,"zlife-list-scroller",2),g.jc("onBottomReached",(function(){return g.Dc(t),g.mc().loadDays()})),g.nc(1,"async"),g.Lc(2,j,2,1,"ng-container",3),g.nc(3,"async"),g.Zb()}if(2&e){var c=g.mc();g.sc("loading",g.oc(1,4,c.loading$))("currentPage",c.currentPage)("maxPagesNumber",c.maxPages),g.Ib(2),g.sc("ngForOf",g.oc(3,6,c.days$))}}var Z=function(){function e(e,n){var t=this;this.store=e,this.calendarioService=n,this.loading$=new p.a(!1),this.currentPage=0,this.maxPages=5,this.startDay=new Date,this.days$=this.store.select(f),this.store.select(f).subscribe((function(){t.currentPage++,t.loading$.next(!1)})),this.days$.pipe(Object(b.a)()).subscribe((function(e){0===e.length&&t.loadDays()}))}return e.prototype.loadDays=function(){var e=this;this.loading$.next(!0),setTimeout((function(){var n=new Date;n.setDate(e.startDay.getDate()+7),e.store.dispatch(r({startDay:e.startDay,endDay:n,dispatchToRemote:!1})),e.startDay=n}),3e3)},e.prototype.eventClicked=function(e){this.calendarioService.inspectEvent(e)},e.\u0275fac=function(n){return new(n||e)(g.Ub(i.h),g.Ub(h))},e.\u0275cmp=g.Ob({type:e,selectors:[["zlife-calendario-page"]],features:[g.Hb([{provide:o.f,useFactory:o.f.create([o.g,"calendarioPage"])}])],decls:5,vars:3,consts:[["padding",""],["scrollName","calendarioPageScroll",3,"loading","currentPage","maxPagesNumber","onBottomReached",4,"ngIf"],["scrollName","calendarioPageScroll",3,"loading","currentPage","maxPagesNumber","onBottomReached"],[4,"ngFor","ngForOf"],[3,"giorno","onClick"]],template:function(e,n){1&e&&(g.ac(0,"ion-header"),g.Vb(1,"zlife-status-bar"),g.Zb(),g.ac(2,"ion-content",0),g.Lc(3,k,4,8,"zlife-list-scroller",1),g.nc(4,"async"),g.Zb()),2&e&&(g.Ib(3),g.sc("ngIf",g.oc(4,1,n.days$).length>0))},directives:[y.k,m.a,y.g,c.l,O.a,c.k,C],pipes:[c.b],styles:[".zlife-calendario__container[_ngcontent-%COMP%]{padding:20px}"]}),e}(),x=t("sSbh");function I(e,n){if(1&e&&(g.ac(0,"div",2),g.ac(1,"h1"),g.Nc(2,"Hai preso il farmaco?"),g.Zb(),g.ac(3,"ion-card",3),g.ac(4,"ion-card-header"),g.ac(5,"ion-card-title",4),g.Nc(6),g.ac(7,"p",5),g.Nc(8),g.Zb(),g.Zb(),g.ac(9,"ion-card-subtitle",6),g.ac(10,"b"),g.Nc(11,"Ore"),g.Vb(12,"br"),g.Nc(13),g.nc(14,"date"),g.Zb(),g.Zb(),g.Zb(),g.Zb(),g.Vb(15,"zlife-ngrx-button",7),g.Vb(16,"zlife-ngrx-button",8),g.Zb()),2&e){var t=g.mc();g.Ib(6),g.Pc(" ",t.event.name," "),g.Ib(2),g.Pc("img_",t.event.type,""),g.Ib(5),g.Oc(g.pc(14,3,t.event.data,"HH:mm"))}}var w=[{path:"",component:Z},{path:"evento",component:function(){function e(e,n){var t=this;this.store=e,this.calendarioService=n,this.store.select(u).subscribe((function(e){e||n.returnToCalendar(),t.event=e}))}return e.\u0275fac=function(n){return new(n||e)(g.Ub(i.h),g.Ub(h))},e.\u0275cmp=g.Ob({type:e,selectors:[["zlife-evento-page"]],features:[g.Hb([{provide:o.f,useFactory:o.f.create([o.g,"eventoPage"])}])],decls:4,vars:1,consts:[["padding",""],["class","zlife-inspect-event__container",4,"ngIf"],[1,"zlife-inspect-event__container"],[1,"zlife-inspect-event__card"],[1,"zlife-inspect-event__title"],[1,"zlife-inspect-event__icon"],[1,"zlife-inspect-event__subtitle"],["type","default","text","S\xec","elementId","btnConfirmEvent",1,"zlife-inspect-event__button"],["type","default","text","No","elementId","btnNegateEvent",1,"zlife-inspect-event__button"]],template:function(e,n){1&e&&(g.ac(0,"ion-header"),g.Vb(1,"zlife-status-bar"),g.Zb(),g.ac(2,"ion-content",0),g.Lc(3,I,17,6,"div",1),g.Zb()),2&e&&(g.Ib(3),g.sc("ngIf",n.event))},directives:[y.k,m.a,y.g,c.l,y.c,y.d,y.f,y.e,x.a],pipes:[c.e],styles:[".zlife-inspect-event__container[_ngcontent-%COMP%]{text-align:center}.zlife-inspect-event__card[_ngcontent-%COMP%]{width:60%;display:inline-block;height:150px}.zlife-inspect-event__subtitle[_ngcontent-%COMP%], .zlife-inspect-event__title[_ngcontent-%COMP%]{text-align:left}.zlife-inspect-event__icon[_ngcontent-%COMP%]{float:right}.zlife-inspect-event__button[_ngcontent-%COMP%]{display:block}"]}),e}()}],D=function(){function e(){}return e.\u0275mod=g.Sb({type:e}),e.\u0275inj=g.Rb({factory:function(n){return new(n||e)},imports:[[a.l.forChild(w)],a.l]}),e}(),N=t("PCNd"),S=t("mrSG"),M=Object(i.p)({calendarioPage:{days:[],inspectEvent:null}},Object(i.r)(l,(function(e,n){return Object(S.a)(Object(S.a)({},e),{calendarioPage:Object(S.a)(Object(S.a)({},e.calendarioPage),{days:Object(S.h)(e.calendarioPage.days,n.days)})})})),Object(i.r)(s,(function(e,n){return Object(S.a)(Object(S.a)({},e),{calendarioPage:Object(S.a)(Object(S.a)({},e.calendarioPage),{inspectEvent:n.event})})})));function $(e,n){return M(e,n)}var E=t("w1ql"),F=t("15JJ"),H=t("67Y/"),U=function(){function e(e,n){var t=this;this.actions$=e,this.calendarioService=n,this.loadEventi$=Object(E.c)((function(){return t.actions$.pipe(Object(E.d)(r),Object(F.a)((function(e){return t.calendarioService.loadDays(e.startDay,e.endDay)})),Object(H.a)((function(e){return l({days:e,dispatchToRemote:!0})})))}))}return e.\u0275fac=function(n){return new(n||e)(g.fc(E.a),g.fc(h))},e.\u0275prov=g.Qb({token:e,factory:e.\u0275fac}),e}(),R=function(){function e(){}return e.\u0275mod=g.Sb({type:e}),e.\u0275inj=g.Rb({factory:function(n){return new(n||e)},imports:[[c.c,D,N.a,y.r,o.b,i.j.forFeature(o.g,$),E.b.forFeature([U])]]}),e}()}}]);